{
    "content": "from opentrons import protocol_api\n\nmetadata = {\n    'protocolName': 'Bioanalysis with CSV input',\n    'author': 'Rami Farawi <rami.farawi@opentrons.com>',\n    'source': 'Custom Protocol Request',\n    'apiLevel': '2.11'\n}\n\n\ndef run(ctx: protocol_api.ProtocolContext):\n\n    [\n     _csv,\n     _p1000_mount,\n     _p20_mount\n    ] = get_values(  # noqa: F821 (<--- DO NOT REMOVE!)\n        \"_csv\",\n        \"_p1000_mount\",\n        \"_p20_mount\")\n\n    # VARIABLES\n    csv = _csv\n    p20_mount = _p20_mount\n    p1000_mount = _p1000_mount\n\n    # LABWARE\n    tuberacks = [ctx.load_labware(\n                 'opentrons_24_tuberack_eppendorf_1.5ml_safelock_snapcap',\n                 slot, label='Sample Tuberack')\n                 for slot in ['1', '2', '4']]\n    reagent_rack = ctx.load_labware(\n                'opentrons_10_tuberack_falcon_4x50ml_6x15ml_conical', '3')\n\n    # TIPRACKS\n    tiprack20 = [ctx.load_labware('opentrons_96_filtertiprack_20ul', slot)\n                 for slot in ['8', '11']]\n    tiprack1000 = [ctx.load_labware('opentrons_96_tiprack_1000ul', slot)\n                   for slot in ['10']]\n\n    # INSTRUMENTS\n    p20 = ctx.load_instrument('p20_single_gen2',\n                              p20_mount,\n                              tip_racks=tiprack20)\n    p1000 = ctx.load_instrument('p1000_single_gen2',\n                                p1000_mount,\n                                tip_racks=tiprack1000)\n\n    csv_rows = [[val.strip() for val in line.split(',')]\n                for line in csv.splitlines()\n                if line.split(',')[0].strip()][1:]\n    print(tuberacks, reagent_rack)\n    p20.flow_rate.aspirate = 0.75*p20.flow_rate.aspirate\n    p20.flow_rate.dispense = 0.75*p20.flow_rate.dispense\n    p1000.flow_rate.aspirate = 0.75*p1000.flow_rate.aspirate\n    p1000.flow_rate.dispense = 0.75*p1000.flow_rate.dispense\n\n    # protocol\n    for row in csv_rows:\n        tube_type, source_slot, source_well, transfer_vol, dest_slot, dest_well = row[1:7]  # noqa: E501\n        if int(transfer_vol) > 100:\n            pip = p1000\n        else:\n            pip = p20\n        source = ctx.loaded_labwares[int(source_slot)].wells_by_name()[\n                                        source_well]\n        dest = ctx.loaded_labwares[int(dest_slot)].wells_by_name()[\n                                        dest_well]\n\n        if \"falcon\" and \"50\" in tube_type.lower():\n            asp_height = 48\n\n        elif pip == p20 and \"15\" in tube_type.lower():\n            asp_height = 30\n        else:\n            asp_height = 1\n\n        print(asp_height)\n\n        pip.pick_up_tip()\n        pip.transfer(int(transfer_vol),\n                     source.bottom(z=asp_height),\n                     dest.top(),\n                     blowout_location='destination well',\n                     air_gap=5,\n                     touch_tip=True,\n                     new_tip='never')\n        pip.blow_out()\n        pip.drop_tip()\n        ctx.comment('\\n')\n",
    "custom_labware_defs": [],
    "fields": [
        {
            "default": "Source ID,Source Tube type,Source Slot (1 - 11),Source Tube,Transfer Volume (\u00b5L),Destination Slot (1 - 11),Destination Tube,Destination ID,Destination Tube Type\nS1,15 mL Falcon,3,A1,250,1,A1,W1,2 mL Eppendorf",
            "label": ".CSV File",
            "name": "_csv",
            "type": "textFile"
        },
        {
            "label": "P1000 Single-Channel Mount",
            "name": "_p1000_mount",
            "options": [
                {
                    "label": "Right",
                    "value": "right"
                },
                {
                    "label": "Left",
                    "value": "left"
                }
            ],
            "type": "dropDown"
        },
        {
            "label": "P20 Single-Channel Mount",
            "name": "_p20_mount",
            "options": [
                {
                    "label": "Left",
                    "value": "left"
                },
                {
                    "label": "Right",
                    "value": "right"
                }
            ],
            "type": "dropDown"
        }
    ],
    "instruments": [
        {
            "mount": "left",
            "name": "p20_single_gen2"
        },
        {
            "mount": "right",
            "name": "p1000_single_gen2"
        }
    ],
    "labware": [
        {
            "name": "Sample Tuberack on 1",
            "share": false,
            "slot": "1",
            "type": "opentrons_24_tuberack_eppendorf_1.5ml_safelock_snapcap"
        },
        {
            "name": "Sample Tuberack on 2",
            "share": false,
            "slot": "2",
            "type": "opentrons_24_tuberack_eppendorf_1.5ml_safelock_snapcap"
        },
        {
            "name": "Opentrons 10 Tube Rack with Falcon 4x50 mL, 6x15 mL Conical on 3",
            "share": false,
            "slot": "3",
            "type": "opentrons_10_tuberack_falcon_4x50ml_6x15ml_conical"
        },
        {
            "name": "Sample Tuberack on 4",
            "share": false,
            "slot": "4",
            "type": "opentrons_24_tuberack_eppendorf_1.5ml_safelock_snapcap"
        },
        {
            "name": "Opentrons 96 Filter Tip Rack 20 \u00b5L on 8",
            "share": false,
            "slot": "8",
            "type": "opentrons_96_filtertiprack_20ul"
        },
        {
            "name": "Opentrons 96 Tip Rack 1000 \u00b5L on 10",
            "share": false,
            "slot": "10",
            "type": "opentrons_96_tiprack_1000ul"
        },
        {
            "name": "Opentrons 96 Filter Tip Rack 20 \u00b5L on 11",
            "share": false,
            "slot": "11",
            "type": "opentrons_96_filtertiprack_20ul"
        },
        {
            "name": "Opentrons Fixed Trash on 12",
            "share": false,
            "slot": "12",
            "type": "opentrons_1_trash_1100ml_fixed"
        }
    ],
    "metadata": {
        "apiLevel": "2.11",
        "author": "Rami Farawi <rami.farawi@opentrons.com>",
        "protocolName": "Bioanalysis with CSV input",
        "source": "Custom Protocol Request"
    },
    "modules": []
}